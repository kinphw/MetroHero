#include "stage_01.h"
#include <stdlib.h>
#include "../../world/glyph.h"

// ============================================
// Stage 1 Map Data
// ============================================
static const char* MAP_LINES[] = {
"########################################################################################################################",
"########################################################################################################################",
"############..........@.........##############..........###########....................###############################",
"############..................0.##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"############..........A.........##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"############....................##############..........###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########............A.......###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.............###########.......................###########....................###############################",
"########.....a.......###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########......b.............###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................###########....................###############....###########",
"########.............###########.......................##.....####....................###############....###########",
"########...............................................##.###.####....................###############....###########",
"########..................................................###.####....................###############....###########",
"########...............................................######.####....................###############....###########",
"########...............................................######.####....................###############....###########",
"########...............................................######....#....................###############....###########",
"########...............................................#########.#....................###############....###########",
"########...............................................#########......................###############....###########",
"########...............................................###########....................###############....###########",
"########...............................................###########....................###############....###########",
"########...............................................###########....................###############....###########",
"########...............................................###########....................###############....###########",
"###############.................#######################################################################....########",
"###############.................#######################################################################....########",
"###############.................#######################################################################....########",
"###############.................#######################################################################....########",
"###############.................########################C##############################################....########",
"###############.................########################.##############################################....########",
"###############.................########################.##############################################....########",
"###############.................########################.##############################################....########",
"###############.................########################.##############################################....########",
"###############..........................................##############################################....########",
"###############....c............########################.##############################################....########",
"###############.................########################.##############################################....########",
"###############.................########################.##############################################....########",
"###############.................########################.##############################################....########",
"########################################################################################################################",
"########################################################################################################################"
};

// ============================================
// Stage 1 Chests
// ============================================
static const ChestConfig CHESTS[] = {
    {'0', "weapon", "Ï¥àÎ≥¥Ïûê Í≤Ä"},
    {'1', "armor",  "Í∞ÄÏ£Ω Í∞ëÏò∑"},
    {'2', "item",   "HP Ìè¨ÏÖò"},
    {'3', "item",   "ÎØºÏ≤©Ïùò Î¨ºÏïΩ"},
    {'4', "item",   "ÌûòÏùò Î¨ºÏïΩ"},
};

// ============================================
// Stage 1 Enemies
// ============================================

// Type 'a': ÎßπÌòπÌïúÍ≥†ÏñëÏù¥
static const char* DIALOGUES_A[] = {
    "ÎÇòÎäî ÏûîÏù∏Ìïú ÎÉ•ÏΩîÎã§Ïòπ",
    "ÎÉ•ÏΩîÎÉ•ÏΩî ÎåÄÏ†ÑÏüÅ"
};

// Type 'b': Í≤ΩÎπÑÎ°úÎ¥á
static const char* DIALOGUES_B[] = {
    "Ï†ÑÏ≤†Ïó≠ ÎÇ¥ Ïπ®ÏûÖÏûêÎ•º Ïù∏ÏãùÌñàÏäµÎãàÎã§...",
    "Í≤ΩÍ≥†: ÎπÑÏù∏Í∞Ä Ïù∏ÏõêÏûÖÎãàÎã§.",
    "ÎèåÏïÑÍ∞ÄÎùº ÎÇ† Í±¥Îì§Î©¥ ÌõÑÌöåÌï†Í≤ÉÏù¥Îã§"
};

static const EnemyConfig ENEMIES[] = {
    {
        'a', "ÎßπÌòπÌïúÍ≥†ÏñëÏù¥", "üêà",
        5,              // maxHp
        1, 3,           // attackMin, Max
        0,              // defense
        DIALOGUES_A,
        sizeof(DIALOGUES_A) / sizeof(DIALOGUES_A[0]),
        COLOR_BRIGHT_CYAN
    },
    {
        'b', "Í≤ΩÎπÑÎ°úÎ¥á", COLOR_RED "ü§ñ" COLOR_RESET,
        10,
        100, 100,
        0,
        DIALOGUES_B,
        sizeof(DIALOGUES_B) / sizeof(DIALOGUES_B[0]),
        COLOR_RED
    }
};

// ============================================
// Stage 1 NPCs
// ============================================

// A: Merchant
static const char* NPC_DIALOGUES_A[] = {
    "ÎãπÏã†ÏùÄ Ïù¥Ï†ú Ïù¥Í≥≥ÏóêÏÑú Î™®ÌóòÏùÑ ÏãúÏûëÌïòÍ≤å Îê©ÎãàÎã§.. ",
    "Ïù¥Í≥≥ÏùÄ ÏÑ±Í∑†Í¥ÄÎåÄÏó≠ÏûÖÎãàÎã§.",
    "ÎãπÏã†ÏùÄ Ïù¥ Î™®ÌóòÏùÑ ÎÅùÎÇ¥Í≥† ÏßëÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞ ÏúÑÌï¥ÏÑúÎäî ÏòÅÎì±Ìè¨Ïó≠Ïóê ÎèÑÏ∞©Ìï¥ÏïºÌï©ÎãàÎã§...",
    "ÏùºÎã® Ïù¥ Ïó≠Ïùò Ïó≠Ïû•ÏùÑ Î¨ºÎ¶¨ÏπòÍ≥† ÏùòÏôïÏó≠ÏúºÎ°ú ÎÑòÏñ¥Í∞ÄÏïº Ìï† Í≤ÉÏûÖÎãàÎã§...",
    "ÌñâÏö¥ÏùÑ ÎπïÎãàÎã§... ÌõÑÌõÑÌõÑ..."
};

// C: Citizen
static const char* NPC_DIALOGUES_C[] = {
    "ÏïàÎÖïÌïòÏÑ∏Ïöî, Ï¢ãÏùÄ ÌïòÎ£®ÏûÖÎãàÎã§.",
    "ÏöîÏ¶ò Ï†ÑÏ≤†Ïó≠Ïù¥ ÏúÑÌóòÌïòÎã§Í≥† ÌïòÎçîÎùºÍ≥†Ïöî.",
    "ÏßÄÌïòÏóêÎäî Ïù¥ÏÉÅÌïú Í≤ÉÎì§Ïù¥ ÎßéÎã§ÎçòÎç∞...",
    "Ï°∞Ïã¨Ìûà Îã§ÎãàÏÑ∏Ïöî!"
};

static const NPCConfig NPCS[] = {
    {
        'A', "Ïö∞Í±¥Î∞ï", COLOR_BRIGHT_BLUE "Ïùè" COLOR_RESET,
        NPC_DIALOGUES_A, sizeof(NPC_DIALOGUES_A)/sizeof(NPC_DIALOGUES_A[0]),
        0, "general", 1 // canTrade=0 currently but shopType set? Original code had canTrade=0.
    },
    {
        'C', "ÏãúÎØº", COLOR_BRIGHT_WHITE "ÎØº" COLOR_RESET,
        NPC_DIALOGUES_C, sizeof(NPC_DIALOGUES_C)/sizeof(NPC_DIALOGUES_C[0]),
        0, NULL, 0
    }
};

// ============================================
// Stage 1 Story (Cinematics)
// ============================================

// --- Intro ---
static const CinematicLine INTRO_LINES[] = {
    { "", STYLE_NORMAL, 300 },
    { "[ STAGE 1 ]", STYLE_TITLE, 500 },
    { "", STYLE_NORMAL, 200 },
    { "ÏÑ±Í∑†Í¥ÄÎåÄÏó≠", STYLE_SUBTITLE, 800 },
};

static const Cinematic INTRO_CINEMATIC = {
    NULL,
    INTRO_LINES,
    sizeof(INTRO_LINES) / sizeof(INTRO_LINES[0]),
    25,
    1,
    COLOR_YELLOW,
    COLOR_WHITE
};

// --- Outro (Clear) ---
static const CinematicLine CLEAR_LINES[] = {
    { "", STYLE_NORMAL, 300 },
    { "‚òÖ STAGE CLEAR ‚òÖ", STYLE_TITLE, 800 },
    { "", STYLE_NORMAL, 500 },
    { "ÏÑ±Í∑†Í¥ÄÎåÄÏó≠ÏùÑ Ï†ïÌôîÌñàÎã§!", STYLE_TYPEWRITER, 600 },
    { "", STYLE_NORMAL, 300 },
    { "ÌïòÏßÄÎßå Ïñ¥Îë†ÏùÄ Îçî ÍπäÏùÄ Í≥≥ÏóêÏÑú Í∏∞Îã§Î¶¨Í≥† ÏûàÎã§...", STYLE_TYPEWRITER, 0 },
};

static const Cinematic CLEAR_CINEMATIC = {
    NULL,
    CLEAR_LINES,
    sizeof(CLEAR_LINES) / sizeof(CLEAR_LINES[0]),
    30, 
    1, 
    COLOR_BRIGHT_GREEN, 
    COLOR_WHITE
};

// ============================================
// Stage Package
// ============================================
const StageData STAGE_01_DATA = {
    1, // ID
    MAP_LINES,
    sizeof(MAP_LINES) / sizeof(MAP_LINES[0]),
    CHESTS,
    sizeof(CHESTS) / sizeof(CHESTS[0]),
    ENEMIES,
    sizeof(ENEMIES) / sizeof(ENEMIES[0]),
    NPCS,
    sizeof(NPCS) / sizeof(NPCS[0]),
    &INTRO_CINEMATIC,
    &CLEAR_CINEMATIC
};
