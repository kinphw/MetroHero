---
trigger: always_on
---

# MetroHero 게임 설계 문서

## 게임 개요
- **장르**: 콘솔 RPG (C언어, 텍스트/아스키 기반)
- **컨셉**: 수원 지하철 1호선을 배경으로 한 히어로 액션 RPG
- **테마**: 수원화성 축성 과정에서 생긴 원혼들이 부활, 주인공이 이를 물리치고 노선을 정상화

## 스토리 배경
- 주인공은 지나가던 평범한 사람 (이름 설정 가능)
- 정신을 차리니 성균관대역, 주변이 이상한 분위기
- 수원화성 축성 당시 희생된 원혼들이 깨어나 노선을 위협
- 주인공이 히어로로서 각 역을 돌며 원혼을 물리침

## 조작 방식
두 가지 입력 방식 동시 지원 (사용자 선택)

### 텐키 (오른손)
| 키 | 기능 |
|---|------|
| 2, 4, 6, 8 | 이동 / 메뉴 커서 |
| 0 | 상호작용 / 확인 |
| Enter | 확인 (0과 동일) |
| + | 메뉴 열기/닫기 |
| . | 취소 / 뒤로 |

### WASD (왼손)
| 키 | 기능 |
|---|------|
| W, A, S, D | 이동 / 메뉴 커서 |
| J 또는 Space | 상호작용 / 확인 |
| K 또는 ESC | 취소 / 뒤로 |
| M 또는 ESC | 메뉴 열기/닫기 |

## 스테이지 구조

### 스테이지 1: 성균관대역 (안전지대)
- 프롤로그 시네마틱
- NPC 배치: 불안해하는 시민들, 정보 제공
- 기능: 대화, 상점, 저장, 회복
- 미션 수령: "역 밖에 이상한 기운이 느껴진다"

### 스테이지 2: 성균관대역 바깥 (전투지대)
- 잡몹 등장
- 중간보스: **화서혼** (화서문에서 유래)
- 클리어 시 전철 복구 → 화서역 이동 가능
- 귀환 기능: 성균관대역으로 돌아갈 수 있음

### 스테이지 3: 화서역 (안전지대)
- 새로운 NPC, 추가 정보 획득
- 기능: 대화, 상점, 저장, 회복
- 미션 수령: "수원 방면이 더 심각하다"

### 스테이지 4: 화서역 바깥 (전투지대)
- 강화된 잡몹 등장
- 중간보스: **영통혼** (영통 지역에서 유래)
- 클리어 시 전철 복구 → 수원역 이동 가능

### 스테이지 5: 수원역 (안전지대)
- 최종 준비 단계
- NPC: 원혼의 정체와 배경 설명
- 기능: 대화, 상점, 저장, 회복
- 미션 수령: "화성에서 강한 기운이 느껴진다"

### 스테이지 6: 수원역 바깥 (전투지대)
- 가장 강한 잡몹들
- 보스 지대로 향하는 길

### 스테이지 7: 수원역 바깥 깊은 곳 (보스지대)
- 최종보스: **장안혼** (장안문에서 유래)
- 격파 시 엔딩 트리거

## 원혼 (보스) 설정
수원화성의 문 이름에서 유래

| 원혼 | 유래 | 등장 스테이지 | 역할 |
|------|------|---------------|------|
| 화서혼 | 화서문 | 스테이지 2 | 첫 번째 중간보스 |
| 영통혼 | 영통 지역 | 스테이지 4 | 두 번째 중간보스 |
| 장안혼 | 장안문 | 스테이지 7 | 최종보스 |

## 게임 흐름

```
[프롤로그] 정신을 차리니 성균관대역
       ↓
[스테이지 1] 성균관대역 - NPC 대화, 미션 수령
       ↓
[스테이지 2] 성균관대역 바깥 - 화서혼 격파
       ↓
[스테이지 3] 화서역 - NPC 대화, 미션 수령
       ↓
[스테이지 4] 화서역 바깥 - 영통혼 격파
       ↓
[스테이지 5] 수원역 - NPC 대화, 최종 미션
       ↓
[스테이지 6] 수원역 바깥 - 강화된 적들
       ↓
[스테이지 7] 수원역 깊은 곳 - 장안혼 격파
       ↓
[엔딩] 원혼 해원, 노선 정상화
```

## 스테이지 타입별 필요 요소

| 타입 | 스테이지 | 필요 요소 |
|------|----------|-----------|
| 안전지대 | 1, 3, 5 | NPC, 상점, 저장, 회복, 전철 이동 |
| 전투지대 | 2, 4, 6 | 잡몹 배치, 맵, 귀환 기능 |
| 보스지대 | 7 | 보스 AI, 엔딩 시네마틱 트리거 |

## 전투 시스템
- 전투 진입 시 포켓몬 스타일 화면 전환
- 별도 전투 루프 진입
- 메뉴: 공격 / 스킬 / 아이템 / 도주 (2x2 그리드)

## 기술 스택
- 언어: C
- 인터페이스: 콘솔 텍스트/아스키 아트
- 개발환경: Visual Studio